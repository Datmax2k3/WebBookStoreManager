@* Views/Shared/PartialView/_PopularBooks.cshtml *@
@using WebBookStoreManage.Models

@{
    var popularBooks = ViewBag.PopularBooks as List<SANPHAM>;
}

<section id="popular-books" class="bookshelf py-5 my-5">
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <div class="section-header align-center">
                    <div class="title">
                        <span>Some quality items</span>
                    </div>
                    <h2 class="section-title">Popular Books</h2>
                </div>

                <div class="tab-content">
                    <div id="all-genre" data-tab-content class="active">
                        @if (popularBooks != null && popularBooks.Any())
                        {
                            <div class="row">
                                @for (int i = 0; i < Math.Min(4, popularBooks.Count); i++)
                                {
                                    var book = popularBooks[i];
                                    var tacGia = book.SanPhamTacGias?.FirstOrDefault()?.TacGia?.TenTacGia ?? "Unknown Author";

                                    <div class="col-md-3">
                                        <div class="product-item">
                                            <figure class="product-style">
                                                <a href="@Url.Action("ProductDetail", "Home", new { id = book.IdSanPham })">
                                                    <img src="@Url.Content("~/images/product/" + book.hinhAnh)" alt="@book.TenSanPham" class="product-item" loading="lazy" />
                                                </a>
                                                <button type="button" class="btn btn-primary btn-sm add-to-cart" data-product-id="@book.IdSanPham">
                                                    Thêm vào giỏ
                                                </button>
                                            </figure>
                                            <figcaption>
                                                <h3>@book.TenSanPham</h3>
                                                <span>@tacGia</span>
                                                <div class="item-price">$ @book.GiaGoc</div>
                                            </figcaption>
                                        </div>
                                    </div>
                                }
                            </div>

                            @if (popularBooks.Count > 4)
                            {
                                <div class="row">
                                    @for (int i = 4; i < Math.Min(8, popularBooks.Count); i++)
                                    {
                                        var book = popularBooks[i];
                                        var tacGia = book.SanPhamTacGias?.FirstOrDefault()?.TacGia?.TenTacGia ?? "Unknown Author";

                                        <div class="col-md-3">
                                            <div class="product-item">
                                                <figure class="product-style">
                                                    <a href="@Url.Action("ProductDetail", "Home", new { id = book.IdSanPham })">
                                                        <img src="@Url.Content("~/images/product/" + book.hinhAnh)" alt="@book.TenSanPham" class="product-item" loading="lazy" />
                                                    </a>
                                                    <button type="button" class="btn btn-primary btn-sm add-to-cart" data-product-id="@book.IdSanPham">
                                                        Thêm vào giỏ
                                                    </button>
                                                </figure>
                                                <figcaption>
                                                    <h3>@book.TenSanPham</h3>
                                                    <span>@tacGia</span>
                                                    <div class="item-price">$ @book.GiaGoc</div>
                                                </figcaption>
                                            </div>
                                        </div>
                                    }
                                </div>
                            }
                        }
                        else
                        {
                            <!-- Hiển thị nội dung mặc định khi không có dữ liệu -->
                            <div class="row">
                                <!-- Copy 4 item đầu tiên từ mẫu -->
                                <!-- Và tiếp tục với 4 item tiếp theo -->
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="quotation" class="align-center pb-5 mb-5">
    <div class="inner-content">
        <h2 class="section-title divider">Quote of the day</h2>
        <blockquote data-aos="fade-up">
            <q>
                “The more that you read, the more things you will know. The more that you learn, the more places
                you’ll go.”
            </q>
            <div class="author-name">Dr. Seuss</div>
        </blockquote>
    </div>
</section>